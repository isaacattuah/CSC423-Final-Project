--Uncomment Drop tables if tables already exist
--DROP TABLE DETERMINES;
--DROP TABLE PERFORMS;
--DROP TABLE EQUIPMENT;
--DROP TABLE SERVICE;
--DROP TABLE EMPLOYEE;
--DROP TABLE CLIENT;

--Client Table
CREATE TABLE Client
 (
  clientNo INT,
  cFirstName VARCHAR(100) ,
	cLastName VARCHAR(100),
  cAddress VARCHAR(100),
	cTeleNum INT CHECK (LENGTH(cTeleNum) < 16),
  PRIMARY KEY(clientNo)
);

-- Employee Table
CREATE TABLE Employee
 (
  empNo INT,
  eFirstName VARCHAR(100) ,
	eLastName VARCHAR(100),
  eAddress VARCHAR(100),
	salary INT ,
	eTeleNum VARCHAR(100) CHECK (LENGTH(eTeleNum) < 16),
  PRIMARY KEY(empNo)
);

--Service Table
CREATE TABLE Service
 (
	serviceNo INT,
  startDay VARCHAR(100) CHECK(startDay IN ('M', 'T', 'W','TH', 'F')),
	endDay VARCHAR(100) CHECK(endDay IN ('M', 'T', 'W','TH', 'F')),
  startTime DATE,
	endTime DATE,
	clientNo INT,
  empNo INT,
  PRIMARY KEY(serviceNo),
	CONSTRAINT SVAL CHECK (endTime > startTime),
	FOREIGN KEY (clientNo) REFERENCES Client(clientNo) ON DELETE SET NULL
);

-- Equipment Table
CREATE TABLE Equipment
 (
  eqID INT,
	descp VARCHAR(300),
	usage INT,
	cost INT,
  serviceNo INT,
PRIMARY KEY(eqID)
);

-- Performs Table
CREATE TABLE Performs
(
serviceNo INT,
empNo INT,
hours INT,
PRIMARY KEY(serviceNo, empNo),
FOREIGN KEY (serviceNo) REFERENCES Service(serviceNo) ON DELETE SET NULL,
FOREIGN KEY (empNo) REFERENCES Employee(empNo) ON DELETE SET NULL
);

-- Determines Table
CREATE TABLE Determines
(
serviceNo INT,
eqID INT,
lastUseDate DATE,
lastServiceDate DATE,
PRIMARY KEY(serviceNo, eqID),
FOREIGN KEY (serviceNo) REFERENCES Service(serviceNo) ON DELETE SET NULL,
FOREIGN KEY (eqID) REFERENCES Equipment(eqID) ON DELETE SET NULL
);

INSERT INTO CLIENT VALUES(1,'Patrick','Nutall','1230 Hemingway Avenue',3067894328);
INSERT INTO CLIENT VALUES(2,'The Cardboard Box','Company','114 Stanford Heights',2134874680);
INSERT INTO CLIENT VALUES(3,'Jerry','Jones','698 South Parkway',2067204328);
INSERT INTO CLIENT VALUES(4,'Dantey','Tope','1621 Dawn Terrace',3094328234);
INSERT INTO CLIENT VALUES(5,'Pogba','Paul','1230 Hemingway Avenue',3054986903);
INSERT INTO CLIENT VALUES(6,'Terry','Nero','1615 Schlimgen Crossing',4302099078);
-----------------------------
INSERT INTO EMPLOYEE VALUES(1,'Chadwick','Pollett','8696 Victoria Court',286.67,9167046280);
INSERT INTO EMPLOYEE VALUES(2,'Alexandros','Antunes','9 Alpine Crossing',418.07,8745093029);
INSERT INTO EMPLOYEE VALUES(3,'Averill','Tomblett','34 Shopko Park',48.05,2269440178);
INSERT INTO EMPLOYEE VALUES(4,'Bernard','Pretswell','647 Sauthoff Court',5359.80,6142641343);
INSERT INTO EMPLOYEE VALUES(5,'Claudetta','Caherny','1 Carberry Court',9113.12,9555627427);
INSERT INTO EMPLOYEE VALUES(6,'Richmond','Molesworth','1294 Pawling Place',277.38,4493208964);
-----------------------------
INSERT INTO SERVICE VALUES(1,'M','F',TO_DATE('2020-12-07','YYYY-MM-DD'),TO_DATE('2020-12-11','YYYY-MM-DD'),1,1);
--INSERT INTO SERVICE VALUES(2,'T','Th',TO_DATE('2020-12-08','YYYY-MM-DD'),TO_DATE('2020-12-10','YYYY-MM-DD'),1,2);
INSERT INTO SERVICE VALUES(3,'W','F',TO_DATE('2020-12-09','YYYY-MM-DD'),TO_DATE('2020-12-11','YYYY-MM-DD'),2,2);
INSERT INTO SERVICE VALUES(4,'TH','M',TO_DATE('2020-12-10','YYYY-MM-DD'),TO_DATE('2020-12-13','YYYY-MM-DD'),3,3);
INSERT INTO SERVICE VALUES(5,'F','T',TO_DATE('2020-12-11','YYYY-MM-DD'),TO_DATE('2020-12-15','YYYY-MM-DD'),4,4);
--INSERT INTO SERVICE VALUES(6,'W','Th',TO_DATE('2020-12-16','YYYY-MM-DD'),TO_DATE('2020-12-18','YYYY-MM-DD'),1,2);
INSERT INTO SERVICE VALUES(7,'T','F',TO_DATE('2020-12-22','YYYY-MM-DD'),TO_DATE('2020-12-25','YYYY-MM-DD'),1,1);
--INSERT INTO SERVICE VALUES(8,'F','S',TO_DATE('2020-12-25','YYYY-MM-DD'),TO_DATE('2020-12-26','YYYY-MM-DD'),1,5);
-----------------------------
INSERT INTO EQUIPMENT VALUES(1,'Carpet Cleaner',3,20,1);
INSERT INTO EQUIPMENT VALUES(2,'Mop',2,40,6);
INSERT INTO EQUIPMENT VALUES(3,'Stone Waxer',1,79,6);
INSERT INTO EQUIPMENT VALUES(4,'Buffer',2,89,2);
INSERT INTO EQUIPMENT VALUES(5,'Sulphuric Acid',3,24,2);
INSERT INTO EQUIPMENT VALUES(6,'Oil',3,90,3);
INSERT INTO EQUIPMENT VALUES(7,'Polish',2,89,2);
-----------------------------
INSERT INTO PERFORMS VALUES(1,1,4);
--INSERT INTO PERFORMS VALUES(2,2,4);
INSERT INTO PERFORMS VALUES(3,3,4);
INSERT INTO PERFORMS VALUES(1,2,5);
INSERT INTO PERFORMS VALUES(4,4,3);
INSERT INTO PERFORMS VALUES(5,5,3);
-----------------------------
INSERT INTO DETERMINES VALUES(1,1,TO_DATE('2020-12-25','YYYY-MM-DD'),TO_DATE('2020-12-26','YYYY-MM-DD'));
--INSERT INTO DETERMINES VALUES(2,2,TO_DATE('2020-12-25','YYYY-MM-DD'),TO_DATE('2020-12-26','YYYY-MM-DD'));
INSERT INTO DETERMINES VALUES(3,3,TO_DATE('2020-12-25','YYYY-MM-DD'),TO_DATE('2020-12-26','YYYY-MM-DD'));
INSERT INTO DETERMINES VALUES(5,5,TO_DATE('2020-12-25','YYYY-MM-DD'),TO_DATE('2020-12-26','YYYY-MM-DD'));
INSERT INTO DETERMINES VALUES(1,3,TO_DATE('2020-12-25','YYYY-MM-DD'),TO_DATE('2020-12-26','YYYY-MM-DD'));
INSERT INTO DETERMINES VALUES(1,2,TO_DATE('2020-12-25','YYYY-MM-DD'),TO_DATE('2020-12-26','YYYY-MM-DD'));
--INSERT INTO DETERMINES VALUES(1,2,TO_DATE('2020-12-25','YYYY-MM-DD'),TO_DATE('2020-12-26','YYYY-MM-DD'));